{% extends "base.html" %}

{% block title %}
Blog Website | Blog
{% endblock title %}

{% block content %}

<section class="blog-page">

    <header>
        <h1>Bloglar</h1>
        <p>So‚Äònggi va dolzarb maqolalar</p>
    </header>

    <!-- Search form -->
    <form action="{% url 'blogs' %}" method="get" class="search-form">
        <input
            type="text"
            name="search"
            placeholder="Maqola qidirish..."
            value="{{ search|default:'' }}"
        >
        <button type="submit">Qidirish</button>
    </form>

    <!-- Error message -->
    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <!-- Blog list -->
    {% if posts %}
        <ul class="blog-list">
            {% for post in posts %}
                {% if post.is_published %}
                    <li class="blog-item">
                        <h2>
                            <a href="{% url 'blog_detail' post.slug %}">
                                {{ post.title }}
                            </a>
                        </h2>

                        <p class="meta">
                            üìÖ {{ post.published_date|date:"d M Y" }}
                            ¬∑ üëÅ {{ post.views }}
                            ¬∑ ‚è± {{ post.reading_minute }} daqiqa
                        </p>

                        <p class="excerpt">
                            {{ post.content|truncatewords:30 }}
                        </p>

                        <a class="read-more" href="{% url 'blog_detail' post.slug %}">
                            Batafsil o‚Äòqish ‚Üí
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    {% else %}
        <p>Hozircha maqolalar topilmadi.</p>
    {% endif %}

</section>

{% endblock content %}
